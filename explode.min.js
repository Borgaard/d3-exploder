(function(d3){d3.geo.explode=function explode(){function exploder(selection){["size","position","projection"].forEach(function(option){if(!config[option]){throw"explode.js: "+option+" not provided to explode."}});var projection=config.projection,size=config.size,position=config.position,scale=projection.scale(),path=d3.geo.path().projection(projection),cache={};size=typeof size==="function"?size:function(){return size};selection.attr("d",function(d,i){var sz=size(d,i);var bounds=path.projection(projection.scale(scale)).bounds(d),w=bounds[1][0]-bounds[0][0],h=bounds[1][1]-bounds[0][1],sc=cache[i]=Math.min(sz/h,sz/w);path.projection(projection.scale(scale*sc));return path(d)}).attr("transform",function(d,i){var A=position(d,i),δx=A[0],δy=A[1];path.projection(projection.scale(scale*cache[i]));var coords=path.centroid(d),cx=coords[0],cy=coords[1];return"translate("+[δx-cx,δy-cy]+")"});projection.scale(scale)}var config={};["size","position","projection"].forEach(function(option){config[option]=null;exploder[option]=function(value){if(!arguments.length)return config[option];config[option]=value;return exploder}});return exploder};d3.geo.explode.version="1.0.1"})(d3);